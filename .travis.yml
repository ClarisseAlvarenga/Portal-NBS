language: ruby
cache: bundler
bundler_args: "--retry 3 --without production heroku"
rvm:
- 1.9.3
- 2.2
- ruby-head
# - jruby-19mode
# - jruby-head
env:
- DB=sqlite
- DB=mysql
- DB=postgresql
before_install: cp config/travis/database.yml.$DB config/database.yml
before_script:
- bundle exec rake db:drop RAILS_ENV=test
- bundle exec rake db:create RAILS_ENV=test
- bundle exec rake db:migrate RAILS_ENV=test
branches:
  only:
  - master
notifications:
  email:
  - iqvoc@innoq.com
deploy:
  - provider: rubygems
    api_key:
      secure: oT43pqyfKRtGEXDNj+yypRtUyzf88LA2JPR+fGwZEUfi/CNRWraAhK4BHfs0XaZlMLQlsLSf6iBGX5W49dZSrPzS4C7fFCjZX8/3KYXe7CEquaN6zkV+ll/L7ekuzXPuewFRHJmobbTGMhHQWQJMnqzjJLGaUfG43YpRt0PC6Ag=
    gem: iqvoc
    on:
      tags: true
      repo: innoq/iqvoc
addons:
  postgresql: "9.3"
