<!-- Labels -->
<%- Iqvoc::Concept.further_labeling_classes.each do |labeling_class, languages|  -%>
  <%- languages || I18n.available_locales.each do |lang| -%>

    <div class="relation">
      <h3><%= t("txt.views.concepts.#{labeling_class.name.to_relation_name}") %> (<%= lang %>)</h3>
      <div class="relation-body">
        <%=raw @concept.alt_labels_for_language(lang.to_s).map {|label|
          link_to(label.value, label_path(:lang => @active_language, :id => label))
        }.join(', ') %>
      </div>
    </div>
  <%- end -%>
<%- end -%>

<div class="relation">
  <h3><%= t('txt.views.concepts.definitions') %></h3>
  <span><%#= @concept.definitions.any? ? linkify(@concept.definitions.first) : t("txt.common.missing.definition") %></span>
</div>

<!-- ConceptRelations -->
<div class="relation">
  <h3><%= t('txt.views.concepts.narrower') %></h3>
  <% if @concept.narrower.length > 0 %>
    <div class="selector">
      <%= treeview @concept.id %>
    </div>
  <% else %>
    <p><%= t('txt.views.concepts.missing.narrower') %></p>
  <% end %>
</div>

<div class="relation">
  <h3><%= t('txt.views.concepts.broader') %></h3>
  <% if @concept.broader.length > 0 %>
    <div class="selector">
      <%= render :partial => "hierarchical_concepts/broader_treeview", :locals => { :root => @concept.id } %>
    </div>
  <% else %>
    <p><%= t('txt.views.concepts.missing.broader') %></p>
  <% end %>
</div>

<%- Iqvoc::Concept.further_relation_classes.each do |relation_class|  -%>
  <div class="relation">
    <h3><%= t("txt.views.concepts.#{relation_class.name.to_relation_name}") %></h3>
    <% related_concepts = @concept.related_concepts_for_relation_class(relation_class) %>
    <% if related_concepts.count > 0 %>
      <%= raw related_concepts.map { |c|
        link_to(c.pref_label, concept_path(:lang => pref_label.language, :id => c))
      }.join(", ")  %>
    <% else %>
      <p class="term-unavailable"><%= t('txt.views.concepts.missing.related') %></p>
    <% end %>
  </div>
<%- end -%>

<div class="relation">
  <h3><%= t("txt.views.concepts.classifiers") %></h3>
  <div class="relation-body">
    <%=raw @concept.classifiers.map {|classifier|
      classifier.notation
    }.join(', ') %>
  </div>
</div>

<%#= render :partial => '_shared/umt_notes', :locals => {:object => @concept} %>
<%#= render :partial => '_shared/matches', :locals => {:object => @concept} %>

<%- Iqvoc::Concept.match_classes.each do |match_class|  -%>
  <% matches = @concept.matches_for_class(match_class) %>
  <h3><%= t("txt.views.concepts.#{match_class.name.to_relation_name}") %></h3>
  <div class="relation-body">
    <%= matches.map {|match| match_url(match.value)}.join(', ') %>
  </div>
<%- end -%>
